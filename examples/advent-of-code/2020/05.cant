;; (Use run.cant to run this.)

(let input (with-input-file ~.read-lines data-file))

(to (part1)
  (max @(each convert input)))

(to (convert line)
  (-> line
      (~ .replace "F" "0") (~ .replace "B" "1")
      (~ .replace "L" "0") (~ .replace "R" "1")
      (:: (number<-text it 2))))

(to (part2)
  (let ids (each convert input))
  (let seats (~.range ((min @ids) .thru (max @ids))))
  ((seats .difference ids.range) .keys))
