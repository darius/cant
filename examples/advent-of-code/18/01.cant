;; (Use run.cant to run this.)

(let changes (with-input-file read-all data-file))


(out .display "Part 1\n")

(out .print (sum changes))


(out .display "\nPart 2\n")

(let freqs (scanl/lazy + 0 changes.cycle))
(out .print (~.first (duplicates<- freqs)))
;;(let seen (set<-))
;;(out .print (for detect ((freq freqs))
;;              (or (seen freq)
;;                  (do (seen .add! freq)
;;                      #no))))
