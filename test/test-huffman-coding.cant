(import (use "../examples/huffman-coding") build-tree show-tree encoder<- encode decode)

(let eg1
  '((#\z 9)
    (#\j 10)
    (#\q 20)
    (#\x 20)
    (#\k 52)
    (#\v 93)
    (#\g 161)
    (#\b 162)
    (#\y 188)
    (#\w 203)
    (#\m 225)
    (#\f 228)
    (#\p 229)
    (#\u 310)
    (#\c 320)
    (#\d 365) 
    (#\l 403)
    (#\h 514)
    (#\r 603)
    (#\s 659)
    (#\i 718)
    (#\n 719)
    (#\o 794)
    (#\a 805)
    (#\t 959)
    (#\e 1231)))

(let t1 (build-tree (each tuple<-list eg1)))
(show-tree out t1)

(let enc1 (encoder<- t1))
(let hello (encode enc1 "hello"))
(out .print hello)
(out .print (text<-list (decode t1 hello)))
